<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert pdf document to plain text/XML. — PDF • trickypdf</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Convert pdf document to plain text/XML. — PDF" />
<meta property="og:description" content="To get the margins of the text: Use Rechteckige Auswahl, and Werkzeuge/Allgemeine Informationen" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">trickypdf</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/vignette.html">Introducing the 'trickypdf'-package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert pdf document to plain text/XML.</h1>
    
    <div class="hidden name"><code>PDF-class.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>To get the margins of the text: Use Rechteckige Auswahl, and Werkzeuge/Allgemeine Informationen</p>
    </div>

    <pre class="usage"><span class='no'>PDF</span></pre>


    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p>An object of class <code>R6ClassGenerator</code> of length 24.</p>
    <h2 class="hasAnchor" id="fields"><a class="anchor" href="#fields"></a>Fields</h2>

    

<dl class='dl-horizontal'>
<dt><code>filename_pdf</code></dt><dd><p>a character vector (length 1) providing a filename</p></dd>

<dt><code>first</code></dt><dd><p>first integer, the first page</p></dd>

<dt><code>last</code></dt><dd><p>last integer, the last page</p></dd>

<dt><code>page</code></dt><dd><p>a specific page number</p></dd>

<dt><code>importFrom</code></dt><dd><p>xml2 read_xml xml_find_all xml_attrs</p></dd>

<dt><code>xml</code></dt><dd><p>parsed xml</p></dd>

<dt><code>text</code></dt><dd><p>a list of character vectors</p></dd>

<dt><code>jitter</code></dt><dd><p>integer, the deviation in lines that will be checked</p></dd>

<dt><code>margin</code></dt><dd><p>a named integer vector ("top", "bottom", "left", "right") indicating the margins of the text</p></dd>

<dt><code>deviation</code></dt><dd><p>allowed deviation of columns from page center</p></dd>

<dt><code>xmlification</code></dt><dd><p>xml to output</p></dd>

<dt><code>no_pages</code></dt><dd><p>number of pages of the pdf document (after pdf2xml)</p></dd>

</dl>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    

<dl class='dl-horizontal'>
  <dt><code>$new(filename_pdf, first = NA, last = NA, jitter = 2, deviation
  = 10L, margins = integer())</code></dt><dd><p>Initialize a new instance of the class PDF to
  process a pdf document.</p></dd>
  <dt><code>$validate()</code></dt><dd><p>Check all fields for correct content.</p></dd>
  <dt><code>$show_pdf()</code></dt><dd><p>Show the pdf document.</p></dd>
  <dt><code>$make_box(box = NULL, page)</code></dt><dd><p>Generate a box for the data.frame
  in the field <code>$boxes</code>. Coordinates a assumed to be in points and are
  recalibrated into pdf units.</p></dd>
  <dt><code>$add_box(box = NULL, page = NULL, replace = TRUE)</code></dt><dd><p>Add a box that will serve as a crop box.</p></dd>
  <dt><code>$drop_unboxed_text_nodes(node, boxes, copy = FALSE)</code></dt><dd><p>Remove any nodes that are not within defined boxes.</p></dd>
  <dt><code>drop_page(page)</code></dt><dd><p>drop a page from from the XML of the pdf document</p></dd>
  <dt><code>$remove_unboxed_text_from_all_pages()</code></dt><dd><p>Remove anything that is printed on pages beyond the defined boxes.</p></dd>
  <dt><code>$decolumnize</code></dt><dd><p>Remove columnization, if pages are typeset with
  two columns. Muli-column layouts with three or more columns are not
  supported so far. The procedure adjusts the coordinates of text right of
  the the horizontal page center, i.e. the page height is added to the top
  position, and half of the page width substracted from the left position.</p></dd>
  <dt><code>$get_pagesizes()</code></dt><dd><p>Get page width and height (points/pts and
  pdf units). The pdf units are extracted from the xmlified pdf document. To
  get sizes in points (pts), PDF_info (package Rpoppler) is used. The result
  is a data.frame in the field pagesizes. The method is called when parsing
  the pdf document.</p></dd>
  <dt><code>$get_text(node, paragraphs = TRUE)</code></dt><dd><p>Get the text from document
  in field 'xml'.</p></dd>
  <dt><code>$get_number_of_pages()</code></dt><dd><p>get number of pages of XML document of pdf</p></dd>
  <dt><code>$get_text_from_pages(paragraphs = TRUE)</code></dt><dd><p></p></dd>
  <dt><code>$get_text_from_boxes(paragraphs)</code></dt><dd><p>Iterate through pages, and
  extract text as defined by boxes from pages. The result will be assigned to
  field <code>pages</code>.</p></dd>
  <dt><code>regex</code></dt><dd><p>Find matches for regex on pages. The method returns the
  pages with at least one match for the regex.</p></dd>
  <dt><code>$reorder()</code></dt><dd><p>Reorder text nodes on a page. Not yet functional!</p></dd>
  <dt><code>$cut()</code></dt><dd><p>NOT WORKING</p></dd>
  <dt><code>$reconstruct_paragraphs</code></dt><dd><p>Reconstruct paragraphs based on the
  following heuristic: If a line ends with a hyphen and is not stump, lines
  are concatenated.</p></dd>
  <dt><code>$purge()</code></dt><dd><p>Remove noise, surplus whitespace signs from the text.</p></dd>
  <dt><code>$xmlify(root = "document", metadata = NULL)</code></dt><dd><p>Turn content of
  field 'pages' into a XML document, optionally adding metadata.</p></dd>
  <dt><code>$xml2md</code></dt><dd><p>Turn xmlified document into markdown (will be stored in
  field 'markdown').</p></dd>
  <dt><code>$md2html()</code></dt><dd><p>Turn markdown (field <code>markdown</code>) into html
  document that will be stored in the field <code>html</code>.</p></dd>
  <dt><code>$xml2html()</code></dt><dd><p>Turn xmlification of pdf document into html document to
  support quality checks.</p></dd>
  <dt><code>$browse(viewer = getOption("viewer", utils::browseURL))</code></dt><dd><p>Show
  html document in browser.</p></dd>
  <dt><code>$wrixte()</code></dt><dd><p>Save xmlified document (available in the field 'xmlification') to a file.</p></dd>
  
  
  


</dl>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>

    

<dl class='dl-horizontal'>
  <dt><code>filename_pdf</code></dt><dd><p>path to a pdf document</p></dd>
  <dt><code>first</code></dt><dd><p>first page of the pdf document to be included</p></dd>
  <dt><code>last</code></dt><dd><p>last page of the pdf document to be included</p></dd>
  <dt><code>jitter</code></dt><dd><p>points up and down for reconstructing tilted lines</p></dd>
  <dt><code>deviation</code></dt><dd><p>points that lines may deviate from middle of page</p></dd>
  <dt><code>margins</code></dt><dd><p>named vector (top, bottom, left, right)</p></dd>
  <dt><code>root</code></dt><dd><p>name of the root node</p></dd>
  <dt><code>metadata</code></dt><dd><p>named character vector, attribtutes of root node of output xml document</p></dd>
  <dt><code>filename</code></dt><dd><p>character vector</p></dd>
  <dt><code>viewer</code></dt><dd><p>the viewer to use to inspect pdf or html documents</p></dd>

</dl>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Basic scenario: A straight-forward pdf without columns;</span>
<span class='co'># it's only page numbers and text on the margins that disturbs</span>

<span class='no'>cdu_pdf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"trickypdf"</span>, <span class='st'>"extdata"</span>, <span class='st'>"pdf"</span>, <span class='st'>"cdu.pdf"</span>)
<span class='no'>P</span> <span class='kw'>&lt;-</span> <span class='no'>PDF</span>$<span class='fu'>new</span>(<span class='kw'>filename_pdf</span> <span class='kw'>=</span> <span class='no'>cdu_pdf</span>, <span class='kw'>first</span> <span class='kw'>=</span> <span class='fl'>7</span>, <span class='kw'>last</span> <span class='kw'>=</span> <span class='fl'>119</span>)
<span class='co'># P$show_pdf()</span>
<span class='no'>P</span>$<span class='fu'>add_box</span>(<span class='kw'>box</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>top</span> <span class='kw'>=</span> <span class='fl'>75</span>, <span class='kw'>height</span> <span class='kw'>=</span> <span class='fl'>700</span>, <span class='kw'>left</span> <span class='kw'>=</span> <span class='fl'>44</span>, <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>500</span>))
<span class='no'>P</span>$<span class='fu'>remove_unboxed_text_from_all_pages</span>()
<span class='no'>P</span>$<span class='fu'>get_text_from_pages</span>()
<span class='no'>P</span>$<span class='fu'>purge</span>()
<span class='no'>P</span>$<span class='fu'>xmlify</span>()
<span class='no'>P</span>$<span class='fu'>xml2html</span>()
<span class='co'># P$browse()</span>
<span class='no'>output</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span>(<span class='kw'>fileext</span> <span class='kw'>=</span> <span class='st'>".xml"</span>)
<span class='no'>P</span>$<span class='fu'><a href='https://rdrr.io/r/base/write.html'>write</a></span>(<span class='kw'>filename</span> <span class='kw'>=</span> <span class='no'>output</span>)


<span class='co'># Advanced scenario I: Get text from pdf with columns, here: define boxes</span>

<span class='no'>doc</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"trickypdf"</span>, <span class='st'>"extdata"</span>, <span class='st'>"pdf"</span>, <span class='st'>"UN_GeneralAssembly_2016.pdf"</span>)
<span class='no'>UN</span> <span class='kw'>&lt;-</span> <span class='no'>PDF</span>$<span class='fu'>new</span>(<span class='kw'>filename_pdf</span> <span class='kw'>=</span> <span class='no'>doc</span>)
<span class='co'># UN$show_pdf()</span>
<span class='no'>UN</span>$<span class='fu'>add_box</span>(<span class='kw'>page</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>top</span> <span class='kw'>=</span> <span class='fl'>380</span>, <span class='kw'>height</span> <span class='kw'>=</span> <span class='fl'>250</span>, <span class='kw'>left</span> <span class='kw'>=</span> <span class='fl'>52</span>, <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>255</span>))
<span class='no'>UN</span>$<span class='fu'>add_box</span>(<span class='kw'>page</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>top</span> <span class='kw'>=</span> <span class='fl'>232</span>, <span class='kw'>height</span> <span class='kw'>=</span> <span class='fl'>400</span>, <span class='kw'>left</span> <span class='kw'>=</span> <span class='fl'>303</span>, <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>255</span>), <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>UN</span>$<span class='fu'>add_box</span>(<span class='kw'>page</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>top</span> <span class='kw'>=</span> <span class='fl'>80</span>, <span class='kw'>height</span> <span class='kw'>=</span> <span class='fl'>595</span>, <span class='kw'>left</span> <span class='kw'>=</span> <span class='fl'>52</span>, <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>255</span>))
<span class='no'>UN</span>$<span class='fu'>add_box</span>(<span class='kw'>page</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>top</span> <span class='kw'>=</span> <span class='fl'>80</span>, <span class='kw'>height</span> <span class='kw'>=</span> <span class='fl'>595</span>, <span class='kw'>left</span> <span class='kw'>=</span> <span class='fl'>303</span>, <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>255</span>), <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>UN</span>$<span class='fu'>get_text_from_boxes</span>(<span class='kw'>paragraphs</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>UN</span>$<span class='fu'>xmlify</span>()
<span class='no'>UN</span>$<span class='fu'>xml2html</span>()
<span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span>()) <span class='no'>UN</span>$<span class='fu'>browse</span>()

<span class='co'># Advanced scenario II: Get text from pdf with columns, long version</span>

<span class='no'>plenaryprotocol</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"trickypdf"</span>, <span class='st'>"extdata"</span>, <span class='st'>"pdf"</span>, <span class='st'>"18238.pdf"</span>)
<span class='no'>P</span> <span class='kw'>&lt;-</span> <span class='no'>PDF</span>$<span class='fu'>new</span>(<span class='kw'>filename_pdf</span> <span class='kw'>=</span> <span class='no'>plenaryprotocol</span>, <span class='kw'>first</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>last</span> <span class='kw'>=</span> <span class='fl'>73</span>)
<span class='co'># P$show_pdf()</span>
<span class='no'>P</span>$<span class='fu'>add_box</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>left</span> <span class='kw'>=</span> <span class='fl'>58</span>, <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>480</span>, <span class='kw'>top</span> <span class='kw'>=</span> <span class='fl'>70</span>, <span class='kw'>height</span> <span class='kw'>=</span> <span class='fl'>705</span>))
<span class='no'>P</span>$<span class='fu'>remove_unboxed_text_from_all_pages</span>()
<span class='no'>P</span>$<span class='no'>deviation</span> <span class='kw'>&lt;-</span> <span class='fl'>10L</span>
<span class='no'>P</span>$<span class='fu'>decolumnize</span>()
<span class='no'>P</span>$<span class='fu'>get_text_from_pages</span>()
<span class='no'>P</span>$<span class='fu'>purge</span>()
<span class='no'>P</span>$<span class='fu'>xmlify</span>()
<span class='no'>P</span>$<span class='fu'>xml2html</span>()
<span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span>()) <span class='no'>P</span>$<span class='fu'>browse</span>()</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#format">Format</a></li>
      <li><a href="#fields">Fields</a></li>
      <li><a href="#methods">Methods</a></li>
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Andreas Blaette, Christoph Leonhardt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


